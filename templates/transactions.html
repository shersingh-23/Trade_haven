{% extends 'base.html' %}
{% block title %}Transactions | TradeHaven{% endblock %}

{% block content %}
<div class="pt-24 flex min-h-screen   overflow-hidden">

  <!-- Fixed Sidebar -->
  <aside
    class="w-64 h-[calc(100vh-5rem)] overflow-y-auto shadow-2xl flex flex-col justify-between py-6 px-4 fixed top-20 left-0">
    <div>
      <div class="text-center mb-6 ">
        <div class="text-[#FFA500] font-bold text-xl uppercase">{{ user.name }}</div>
        <div class="mt-3 mb-2  rounded-lg border border-[#FFA500] py-2 px-4 flex items-center justify-center">
          <h6>WALLET : </h5>
            <span class="text-lg font-semibold text-green-400 ps-2"> ₹ {{ '%.2f' | format(user.balance) }}</span>
        </div>
      </div>
      <nav class="space-y-9 text-sm">
        <a href="/dashboard" class="block hover:text-[#FFA500]  mt-[50px] text-center">Dashboard</a>
        <a href="/watchlist" class="block hover:text-[#FFA500] text-center">WatchList</a>
        <a href="/portfolio" class="block hover:text-[#FFA500] text-center">Portfolio</a>
        <a href="/market" class="block hover:text-[#FFA500] text-center">Market</a>
        <a href="/prediction" class="block hover:text-[#FFA500] text-center">Prediction</a>
        <a href="/transactions" class="block font-bold text-[#FFA500] text-center">Transaction</a>
        <a href="/support" class="block hover:text-[#FFA500] text-center">Support</a>
        <a href="/settings" class="block hover:text-[#FFA500] text-center">Setting</a>
      </nav>
    </div>
  </aside>

  <!-- Main Content -->
  <main class="flex-1 ml-64 p-6 mt-[-80px] space-y-10 h-[calc(100%-6rem)]">



    <!-- Transaction Table -->
    <div class=" p-6 rounded-lg shadow-2xl">
      <h2 class="text-2xl font-bold text-yellow-400 mb-4">Transaction History</h2>
      <div class="overflow-x-auto">
        <table class="w-full text-sm text-left border-collapse">
          <thead class="text-orange-300 border-b border-gray-700">
            <tr>
              <th class="py-2">Date</th>
              <th>Type</th>
              <th>Stock</th>
              <th>Quantity</th>
              <th>Price (₹)</th>
            </tr>
          </thead>
          <tbody>
            {% for tx in rows %}
            <tr class="border-t border-gray-800  transition">
              <td>{{ tx.date }}</td>
              <td class="{% if tx.type == 'BUY' %}text-green-400{% else %}text-red-400{% endif %}">{{ tx.type }}</td>
              <td>{{ tx.stock_symbol }}</td>
              <td>{{ tx.quantity }}</td>
              <td>₹{{ '%.2f' | format(tx.price) }}</td>
            </tr>
            {% else %}
            <tr>
              <td colspan="5" class="text-center text-gray-400 py-6">No transactions found.</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>

    <!-- Download Button -->
    <div class="flex justify-end">
      <a href="{{ url_for('download_transactions') }}"
        class="bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded">
        Download Transactions
      </a>
    </div>

  </main>
</div>
{% endblock %}